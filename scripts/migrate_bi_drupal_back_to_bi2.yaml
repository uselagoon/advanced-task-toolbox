steps:
  - name: Change deploy target
    type: setdeploytarget
    target: 143
  - name: Deploy
    type: deploy
#  - name: Scale up cli deployment
#    type: scale
#    deployment: cli
#  - name: run local ls
#    type: exec
#    local: true
#    command: cp /var/run/secrets/lagoon/ssh/ssh-privatekey /tmp/ssh-privatekey && chmod 600 /tmp/ssh-privatekey && lagoon-sync sync mariadb --dry-run=true --config=./scripts/migrate_bi_drupal/lagoon-sync.yml -p %project% -t %environment% -e local --ssh-key=/tmp/ssh-privatekey --no-interaction
#  - name: copy lagoon sync to cli pod
#    type: copyto
#    deployment: cli
#    source: /usr/bin/lagoon-sync
#    destination: /tmp/lagoon-sync-migrate
#  - name: copy lagoon sync config to cli pod
#    type: copyto
#    deployment: cli
#    source: ./scripts/migrate_bi_drupal/lagoon-sync.yml
#    destination: /tmp/lagoon-sync-migrate.yml
#  - name: Run ls on deployment tmp
#    type: exec
#    deployment: cli
#    command: ls -lah /tmp
#  - name: Run lagoon-sync on files
#    type: exec
#    deployment: cli
#    command: /tmp/lagoon-sync-migrate sync files --dry-run=false --config=/tmp/lagoon-sync-migrate.yml -p demo-fsa -e main -t local --no-interaction
#  - name: Set deploy target to BI3
#    type: setdeploytarget
#    target: 157
#  - name: Deploy Branch
#    type: deploy
#  - name: Lagoon sync mysql
#    local: true
#    command: lagoon-sync

#  - name: Scale up cli deployment
#    type: scale
#    deployment: cli
#  - name: Run ls on deployment
#    type: exec
#    deployment: cli
#    command: ls -lah
#  - name: Copy to container
#    type: copyto
#    deployment: cli
#    source: ./testcopy.txt
#    destination: /tmp/testcopy.txt

rollback:
  - name: Print Rollback
    type: exec
    local: true
    command: echo "Rollback"